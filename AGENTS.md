# Repository Guidelines

## プロジェクト構成 / モジュール整理
- `src/`：アプリ本体。機能単位でサブパッケージ化（例：`src/app/`, `src/utils/`）。
- `tests/`：テストコード。対象と同じパス構造で配置（例：`src/utils/parser.py` → `tests/test_utils_parser.py`）。
- `assets/`：画像・設定などのリソース。大容量は最小限に保つ。
- `README.md`：概要と実行方法の入口。

## ビルド・テスト・開発コマンド
- `python main.py`：アプリをローカル実行。
- `pytest`：テスト実行（例：`pytest -q`、特定のみ：`pytest -k keyword`）。
- `git status`：変更状況を確認。
- `git diff`：差分を確認し、意図しない変更を検出。

## コーディング規約・命名
- 言語は Python。PEP 8 準拠／インデントはスペース4。
- 命名：モジュール=小文字、関数/変数=`snake_case`、クラス=`PascalCase`。
- ドキュメント：日本語の docstring とコメントを推奨。関数は1行概要＋必要に応じ詳細。
- 例外処理：広すぎる `except:` を避け、想定例外を明示。
- フォーマット/リンタ：固定ツールは未指定。可能なら `black`/`ruff` 互換で整形・静的解析を行い PR 前に差分を最小化。

## テスト方針
- フレームワーク：`pytest`。
- 配置/命名：`tests/test_*.py` とし、対象に対応するファイル名を採用（例：`test_parser_returns_empty_on_invalid()`）。
- 実行：`pytest -q`（失敗を最小限で止める例：`pytest -x`）。
- カバレッジ：重要な分岐・境界値・エラー経路にテストを追加。新規機能は最低1つ以上のテストを同時追加。

## コミット／プルリクエスト
- コミット：スコープを小さく。件名は命令形・50文字程度を目安、本文で動機/影響/代替案を簡潔に。
- 例：`fix: 入力検証の境界値を修正`、`feat: 設定ローダを追加し環境変数対応`。
- PR 要件：目的、変更点、テスト方法、影響範囲、関連 Issue を記載。必要に応じスクリーンショットやログを貼付。
- マージ条件：テスト成功・自己レビュー（`git diff` 確認）・不要ファイル/デバッグ出力の除去。

## セキュリティ／設定の注意
- 機密情報（鍵・トークン・個人情報）はコミット禁止。必要なら `.env` 等でローカル管理し `.gitignore` に追加。
- 設定ファイルはテンプレート（例：`assets/config.example.json`）を用意し、実値は各自の環境で複製。

## エージェント設定（thinking の日本語化）
- 既定言語：日本語（質問・回答・進捗更新・プレアンブル）。
- 設定ファイル：`assets/agent.config.json`
  - `language`/`preamble_locale`/`plan_updates_locale`：`"ja"` を維持。
  - `translate_external_output`: 外部出力は必要に応じて日本語要約。
- 補足：エージェント/ツール側が設定を読む場合に備えたメタ設定です。運用時は日本語でのやり取りを徹底してください。
